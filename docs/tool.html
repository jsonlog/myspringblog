<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <script src="js/jquery.min.js"></script><style type="text/css">
        /* body {
            background-color: wheat
        }
    
        h1 {
            color: red;
        }
    
        p {
            color: greenviolet
        } */
    </style>
</head>
<body>
    <table>
        <tbody>
            <tr>
                <th>八进制0
                </th>
                <th>二进制</th>
                <th>根</th>
                <th>十进制</th>
                <th>十六进制0x
                </th>
                <!-- <th> -->
                    <!-- Unicode\u16 -->
                    <!-- (ASCII) -->
                <!-- </th> -->
                <th>\uISO&amp;#10;</th>
                <th>8859-1</th>
                <th>负原码</th>
                <th>负反码</th>
                <th>负补码</th>
                <th>颜色</th>
                <th>decodeURIComponent</th>
                <th>encodeURICp%16</th>
                <!-- <th>decodeURI</th> -->
                <!-- <th>encodeURI</th> -->
            </tr>
            <tr>
                <!-- <td><input type="text" id="urlstr" style="width:1000px;" οnkeypress="getKey();" /></td> -->
                <td><input type="text" id="octal" onkeydown="getKey()" /></td>
                <td><input type="text" id="binary" onkeydown="getKey()" /></td>
                <td><input type="text" id="sqrt" onkeydown="getKey()" /></td>
                <td><input type="text" id="decimal" onkeydown="getKey()" /></td>
                <td><input type="text" id="sexadecimal" onkeydown="getKey()" /></td>
                <td><input type="text" id="unicode" onkeydown="getKey()" /></td>
                <!-- <td><input type="text" id="iso" onkeydown="getKey()" /></td> -->
                <td></td>
                <td><input type="text" id="complement" onkeydown="getKey()" /></td>
                <td><input type="text" id="negative" onkeydown="getKey()" /></td>
                <td><input type="text" id="positive" onkeydown="getKey()" /></td>
                <td id="rgbcolor" align="center" style="color:#ffffff" bgcolor="#0000ff00"></td>
                <td><input type="text" id="decodeURIComponent" onkeydown="getKey()" /></td>
                <td><input type="text" id="encodeURIComponent" onkeydown="getKey()" /></td>
                <!-- <td><input type="text" id="decodeURI" onkeydown="getKey()" /></td>
                <td><input type="text" id="encodeURI" onkeydown="getKey()" /></td> -->
            </tr>
        </tbody>
    </table>
<script>    
    var ISO_8859_1 = {
        34: "quot",//"
        38: "amp",//&
        39: "apos",//'
        60: "lt",//<
        62: "gt",//>
        //ISO-8859-1 的第二部分（编码 160-191）包含了常用的特殊字符。
        160: "nbsp",
        161: "iexcl",
        162: "cent",
        163: "pound",
        164: "curren",
        165: "yen",
        166: "brvbar",
        167: "sect",
        168: "uml",
        169: "copy",
        170: "ordf",
        171: "laquo",
        172: "not",
        173: "shy",
        174: "reg",
        175: "macr",
        176: "deg",
        177: "plusmn",
        178: "sup2",
        179: "sup3",
        180: "acute",
        181: "micro",
        182: "para",
        183: "middot",
        184: "cedil",
        185: "sup1",
        186: "ordm",
        187: "raquo",
        188: "frac14",
        189: "frac12",
        190: "frac34",
        191: "iquest",
        //ISO-8859-1 的最后一部分（编码 192-255，除了 215 和 247）包含了西欧国家使用的字符。
        192: "Agrave",
        193: "Aacute",
        194: "Acirc",
        195: "Atilde",
        196: "Auml",
        197: "Aring",
        198: "AElig",
        199: "Ccedil",
        200: "Egrave",
        201: "Eacute",
        202: "Ecirc",
        203: "Euml",
        204: "Igrave",
        205: "Iacute",
        206: "Icirc",
        207: "Iuml",
        208: "ETH",
        209: "Ntilde",
        210: "Ograve",
        211: "Oacute",
        212: "Ocirc",
        213: "Otilde",
        214: "Ouml",
        215: "times",//×
        216: "Oslash",
        217: "Ugrave",
        218: "Uacute",
        219: "Ucirc",
        220: "Uuml",
        221: "Yacute",
        222: "THORN",
        223: "szlig",
        224: "agrave",
        225: "aacute",
        226: "acirc",
        227: "atilde",
        228: "auml",
        229: "aring",
        230: "aelig",
        231: "ccedil",
        232: "egrave",
        233: "eacute",
        234: "ecirc",
        235: "euml",
        236: "igrave",
        237: "iacute",
        238: "icirc",
        239: "iuml",
        240: "eth",
        241: "ntilde",
        242: "ograve",
        243: "oacute",
        244: "ocirc",
        245: "otilde",
        246: "ouml",
        247: "divide",//÷
        248: "oslash",
        249: "ugrave",
        250: "uacute",
        251: "ucirc",
        252: "uuml",
        253: "yacute",
        254: "thorn",
        255: "yuml",
        //
        338: "OElig",
        339: "oelig",
        352: "Scaron",
        353: "scaron",
        376: "Yuml",
        402: "fnof",
        710: "circ",
        732: "tilde",
        //HTML 支持的希腊字母
        913: "Alpha",
        914: "Beta",
        915: "Gamma",
        916: "Delta",
        917: "Epsilon",
        918: "Zeta",
        919: "Eta",
        920: "Theta",
        921: "Iota",
        922: "Kappa",
        923: "Lambda",
        924: "Mu",
        925: "Nu",
        926: "Xi",
        927: "Omicron",
        928: "Pi",
        929: "Rho",
        931: "Sigma",
        932: "Tau",
        933: "Upsilon",
        934: "Phi",
        935: "Chi",
        936: "Psi",
        937: "Omega",
        945: "alpha",
        946: "beta",
        947: "gamma",
        948: "delta",
        949: "epsilon",
        950: "zeta",
        951: "eta",
        952: "theta",
        953: "iota",
        954: "kappa",
        955: "lambda",
        956: "mu",
        957: "nu",
        958: "xi",
        959: "omicron",
        960: "pi",
        961: "rho",
        962: "sigmaf",
        963: "sigma",
        964: "tau",
        965: "upsilon",
        966: "phi",
        967: "chi",
        968: "psi",
        969: "omega",
        977: "thetasym",
        978: "upsih",
        982: "piv",
        //
        8194: "ensp",
        8195: "emsp",
        8201: "thinsp",
        8204: "zwnj",
        8205: "zwj",
        8206: "lrm",
        8207: "rlm",
        8211: "ndash",
        8212: "mdash",
        8216: "lsquo",
        8217: "rsquo",
        8218: "sbquo",
        8220: "ldquo",
        8221: "rdquo",
        8222: "bdquo",
        8224: "dagger",
        8225: "Dagger",
        8226: "bull",
        8230: "hellip",
        8240: "permil",
        8242: "prime",
        8243: "Prime",
        8249: "lsaquo",
        8250: "rsaquo",
        8254: "oline",
        8364: "euro",
        8482: "trade",//"153" ™
        8592: "larr",
        8593: "uarr",
        8594: "rarr",
        8595: "darr",
        8596: "harr",
        8629: "crarr",
        8968: "lceil",
        8969: "rceil",
        8970: "lfloor",
        8971: "rfloor",
        9674: "loz",
        9824: "spades",
        9827: "clubs",
        9829: "hearts",
        9830: "diams",
        //HTML 支持的数学符号
        8704: "forall",
        8706: "part",
        8707: "exist",
        8709: "empty",
        8711: "nabla",
        8712: "isin",
        8713: "notin",
        8715: "ni",
        8719: "prod",
        8721: "sum",
        8722: "minus",
        8727: "lowast",
        8730: "radic",
        8733: "prop",
        8734: "infin",
        8736: "ang",
        8743: "and",
        8744: "or",
        8745: "cap",
        8746: "cup",
        8747: "int",
        8756: "there4",
        8764: "sim",
        8773: "cong",
        8776: "asymp",
        8800: "ne",
        8801: "equiv",
        8804: "le",
        8805: "ge",
        8834: "sub",
        8835: "sup",
        8836: "nsub",
        8838: "sube",
        8839: "supe",
        8853: "oplus",
        8855: "otimes",
        8869: "perp",
        8901: "sdot",
    }
    function getKey() {
        // console.log(event);
        var input = event.target;
        if (event.keyCode == 13) {
            var value = input.value;//$('input[name="mobile"]').val();
            allInput(input);
        }
    }
    function allInput(myinput){
        emptyInput(myinput);
        var id = myinput.id;
        if(id == "decodeURIComponent"){
            var toencodeURIComponent = document.getElementById("encodeURIComponent");
            toencodeURIComponent.value = encodeURIComponent(myinput.value);
            return;
        }
        if (id == "encodeURIComponent") {
            var todecodeURIComponent = document.getElementById("decodeURIComponent");
            todecodeURIComponent.value = decodeURIComponent(myinput.value);
            return;
        }
        // if (id == "decodeURI") {
        //     var toencodeURI = document.getElementById("encodeURI");
        //     toencodeURI.value = encodeURI(myinput.value);
        //     return;
        // }
        // if (id == "encodeURI") {
        //     var todecodeURI = document.getElementById("decodeURI");
        //     todecodeURI.value = decodeURI(myinput.value);
        //     return;
        // }
        var values = myinput.value.replace(/(^\s*)|(\s*$)/g, "").split(" ");//$.trim("  abc ") ;
        if(id == "unicode") values = myinput.value.split("");
        var input = document.getElementsByTagName("input");
        var color = document.getElementById("rgbcolor");
        if(id == "decimal"){
            var rgbcolor = '';
            var val = DecimalToBinary(values[0], 16, 2);
            // if(val.length < 2) val = '0' + val;
            rgbcolor += val;
            val = DecimalToBinary(values[1], 16, 2);
            // if(val.length < 2) val = '0' + val;
            rgbcolor += val;
            val = DecimalToBinary(values[2], 16, 2);
            // if (val.length < 2) val = '0' + val;
            rgbcolor += val;
            if(values.length > 3){
                val = DecimalToBinary(values[3], 16, 2);
                // if (val.length < 2) val = '0' + val;
                rgbcolor += val;
            }
            color.outerHTML = '<td id="rgbcolor" align="center" style="color:#ffffff" bgcolor="#' + rgbcolor + '">';
        }
        if(id == "sexadecimal"){
            color.outerHTML = '<td id="rgbcolor" align="center" style="color:#ffffff" bgcolor="#' + myinput.value.replace(new RegExp(' ', "g"),"") + '">';
        }
        for(k in values){
            var value = values[k];
            if(value == '' || value == ' ') continue;
            if(id == "octal") var decimal = BinaryToDecimal(value, 8);
            if(id == "binary") var decimal = BinaryToDecimal(value, 2);
            if (id == "sqrt") var decimal = 2^value;
            if (id == "decimal") var decimal = value;
            if (id == "sexadecimal") var decimal = BinaryToDecimal(value,16);
            if (id == "unicode") var decimal = UnicodeToDecimal(value);
            decimal = parseInt(decimal);
            console.log(decimal);
            for(var i in input){
                switch(input[i].id){
                    case id: break;
                    case "octal": input[i].value += decimal > -1? ' '+DecimalToBinary(decimal,8):'';break;
                    case "binary": input[i].value += decimal > -1 ? ' ' +DecimalToBinary(decimal, 2) : ''; break;
                    case "sqrt": input[i].value += decimal > -1 ? ' ' +DecimalToSqrt(decimal) : ''; break;
                    case "decimal": input[i].value += decimal > -1 ? ' ' +decimal : ''; break;
                    case "sexadecimal": input[i].value += decimal > -1 ? ' ' +DecimalToBinary(decimal, 16) : ''; break;
                    case "unicode": input[i].value += decimal > -1 ? ' ' +DecimalToUnicode(decimal, 8) : ''; break;
                    // case "iso": input[i].outerHTML = decimal > -1 ? '<input type="text" id="iso" onkeydown="getKey()" value="' +DecimalToIso(decimal)+'"></input>':'<input/>';
                    break;
                    default:input[i].value = '';
                }
            }
        }
    }
    function emptyInput(myinput){
        var input = document.getElementsByTagName("input");
        for(i in input){
            if(input[i].id != myinput.id) input[i].value = '';
        }
    }

    var table = document.getElementsByTagName("table");
    total = 256;
    for(var i = 0; i<= total;i++){
        var tr = document.createElement("tr");
        table[0].appendChild(tr);

        td = document.createElement("td")
        tr.appendChild(td);
        td.innerText = DecimalToBinary(i, 8);

        td = document.createElement("td")
        tr.appendChild(td);
        td.innerText = DecimalToBinary(i, 2);

        td = document.createElement("td")
        tr.appendChild(td);
        td.innerText = DecimalToSqrt(i);
        // var pow = i;
        // var sqrt = 0;
        // while (!(pow % 2)) {
        //     if(pow < 2) break;
        //     pow = parseInt(pow / 2);
        //     sqrt += 1;
        // }     
        // if (pow == 1) td.innerText = sqrt;
        // while(pow > 2){
        //     if(pow%2) {
        //         td.innerText = '';
        //         break;
        //     }else {
        //         sqrt += 1;
        //         td.innerText = sqrt;//Math.pow(i,1/2);//sqrt
        //         pow = parseInt(pow / 2);
        //     }
        // }   

        td = document.createElement("td")
        tr.appendChild(td);
        td.innerText = i;

        td = document.createElement("td")
        tr.appendChild(td);
        var number16 = DecimalToBinary(i, 16);
        td.innerText = number16;
//
        // td = document.createElement("td")
        // tr.appendChild(td);
        // td.innerText = String.fromCharCode(i).replace(" ", "space");//string.fromCharCode(unicode,16))；
//
        // td = document.createElement("td")
        // tr.appendChild(td);
        // td.innerText = SexadecimalToUnicode(number16)
//
        tr.innerHTML += '<td>&#' + i + ';</td>'

        td = document.createElement("td")
        tr.appendChild(td);
        if(ISO_8859_1[i])
        td.innerText = '&'+ISO_8859_1[i]+';';

        td = document.createElement("td")
        tr.appendChild(td);
        if(i <= 128)
        td.innerText = DecimalToPositive(i,8);

        td = document.createElement("td")
        tr.appendChild(td);
        if (i <= 128)
        td.innerText = DecimalToNegative(i,8);

        td = document.createElement("td")
        tr.appendChild(td);
        if (i <= 128)
        td.innerText = DecimalToComplement(i,8);

        // //2^4 6 rgb(255,255,255)
        // var red = parseInt(i/256);
        // var green = parseInt(i/16)%16;
        // var blue = i%16;
        // var red1 = DecimalToBinary(4*parseInt(red / 4),16);
        // var red2 = DecimalToBinary(4 *(red%4), 16);
        // var green1 = DecimalToBinary(4 *parseInt(green / 4), 16);
        // var green2 = DecimalToBinary(4 *(green % 4), 16);
        // var blue1 = DecimalToBinary(4 *parseInt(blue / 4), 16);
        // var blue2 = DecimalToBinary(4 *(blue % 4), 16);

        // // var number2444 = red * 256 * 256 * 16 + green * 256 *16 + blue * 16;
        // // if(i > 16 ) number2444 = i * 256 ;
        // // if(i > 256 ) number2444 = i * 256 *16; 
        // number2444 = red1+red2+green1+green2+blue1+blue2;//DecimalToBinary(number2444, 16);
        // tr.innerHTML += '<td align="center" style="color:#ffffff" bgcolor="#'+ number2444+'">'+ red1 +'-' + red1 + '-'+green1+'-' + green2 + '-'+blue1+'-' + blue2 + '-'+number2444+'</td>';
        // tr.innerHTML += '<td align="center" style="color:#ffffff" bgcolor="#' + 'ff3399' + '">'
    }

    // alert(SexadecimalToUnicode(4190))
    
    // console.log(binaryFloatToDecimal(1111011.111))  // 123.875
    // console.log(binaryFloatToDecimal(1111011))  // 123
    // console.log(binaryFloatToDecimal(0.111))  // 0.875  

    // console.log(DecimalToBinary(10,2))  
    // console.log(DecimalToBinary(10, 8))  
    // console.log(DecimalToBinary(10, 16)) 

    // console.log(BinaryToDecimal(10101,2))  
    // console.log(BinaryToDecimal(126, 8))  
    // console.log(BinaryToDecimal('c',16))
    // console.log(0xffffff.toString())//16777215

    function DecimalToUnicode(number) {
        return SexadecimalToUnicode(DecimalToBinary(number,16));
    }

    function SexadecimalToUnicode(number){
        number = '0000'+number;
        number = "\\u" + number.substr(number.length - 4);
        return unescape(number.replace(/\\/g, '%'));
        //escape(str).replace(/%/g,'\\');
    }

    function UnicodeToDecimal(str){
        return str.charCodeAt();//i
    }

    function DecimalToIso(number){
        return '&#'+number+';';
    }

    function IsoToDecimal(str){
        // Latin - 1
    }

    function DecimalToBinary(number,radix,bit) {
        number = parseInt(number);
        binary = number.toString(radix);
        if(bit && binary.length < bit){
            return (Array(bit).join("0")+binary).slice(-bit);
        }
        return binary;
    }    

    function DecimalToSqrt(number){
        var sqrt = 0;
        while (!(number % 2)) {
            if (number < 2) break;
            number = parseInt(number / 2);
            sqrt += 1;
        }
        if(number == 1) return sqrt;
        else return '';
    }

    function BinaryToDecimal(number,radix){
        if (16 == radix) return parseInt('0x'+number/*,10*/) //0xa.toString(/*10*/)
        return parseInt(number,radix)
        // if(!radix) return ('0x'+number).toString();
        // return number.toString(radix);
    }
    /**
    * 将二进制小数（包含整数部分和小数部分）转换为十进制数
    * @param binaryNum 二进制数（可能是整数，也可能是小数）
    */
    function binaryFloatToDecimal(binaryNum) {
        // 如果该二进制只有整数部分则直接用 parseInt(string, radix) 处理
        if (Number.isInteger(binaryNum)) {
            return parseInt(binaryNum, 2)
        } else {
            const binaryFloatNumArr = binaryNum.toString().split(".")

            // 将二进制整数转换为十进制数
            const binaryIntParStr = binaryFloatNumArr[0]
            const decimalIntPartNum = parseInt(binaryIntParStr, 2)

            // 将二进制小数部分转换为十进制数
            const binaryFloatPartArr = binaryFloatNumArr[1].split("")
            const eachDecimalFloatPartNum = eachBinaryFloatPartToDecimal(binaryFloatPartArr)
            const deciamlFloatPartNum = eachDecimalFloatPartNum.reduce((accumulator, currentValue) => { return accumulator + currentValue })
            return decimalIntPartNum + deciamlFloatPartNum
        }
    }
    /**
    * 将二进制小数部分转换为十进制数
    * @param binaryFloatPartArr 二进制小数部分中由小数各位组成的数组
    */
    function eachBinaryFloatPartToDecimal(binaryFloatPartArr) {
        return binaryFloatPartArr.map((currentValue, index) => {
            return Number(currentValue) * Math.pow(2, (-(index + 1)))
        })
    }

    function DecimalToPositive(number, byte) {//正数原反补码 (Array(8).join("0")+i.toString(2)).slice(-8)
        return '1' + (Array(byte).join("0") + (-number).toString(2)).slice(-byte + 1).replace('-', 0)
    }

    function DecimalToNegative(number, byte) {
        return '1' + (Array(byte).join("0") + (-number).toString(2)).slice(-byte + 1).replace('-', 0).split('').map(bit => bit == '0' ? '1' : '0').join('')
    }

    function DecimalToComplement(number, byte) {//slice(start) start负数表示从后面取7个
        if(number == 0) return Array(byte+1).join("0");
        var fsfm_plus1 = parseInt((Array(byte).join("0") + (-number).toString(2)).slice(-byte + 1).replace('-', 0).split('').map(bit => bit == '0' ? '1' : '0').join(''), 2) + 1;
        return '1' + (Array(byte).join("0") + fsfm_plus1.toString(2)).slice(-byte + 1).replace('-', 0)
    }
</script>
</body>
</html>